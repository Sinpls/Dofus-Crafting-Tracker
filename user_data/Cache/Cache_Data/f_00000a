import { injectQuery as __vite__injectQuery } from "/@vite/client";import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/components/Craftimizer/CraftedItemList.tsx");import { jsxDEV } from "/@id/__x00__react/jsx-dev-runtime";
import RefreshRuntime from "/@react-refresh";
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot) {
  if (!window.__vite_plugin_react_preamble_installed__) {
    throw new Error("@vitejs/plugin-react can't detect preamble. Something is wrong. See https://github.com/vitejs/vite-plugin-react/pull/11#discussion_r430879201");
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = (type, id) => {
    RefreshRuntime.register(type, "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx " + id);
  };
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/@fs/E:/Data/Projects/Dofus-Salescraft/node_modules/.vite/deps/react.js?v=b99ad393"; const useState = __vite__cjsImport3_react["useState"];
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "/@fs/E:/Data/Projects/Dofus-Salescraft/@/components/ui/table.tsx";
import { Input } from "/@fs/E:/Data/Projects/Dofus-Salescraft/@/components/ui/input.tsx";
import { Button } from "/@fs/E:/Data/Projects/Dofus-Salescraft/@/components/ui/button.tsx";
import { db } from "/services/DatabaseService.ts";
const CraftedItemList = ({
  craftedItemList,
  updateCraftedItem,
  removeCraftedItem
}) => {
  _s();
  const [localValues, setLocalValues] = useState({});
  const sortedCraftedItemList = [...craftedItemList].sort((a, b) => a.name.localeCompare(b.name));
  const handleChange = (ankama_id, field, value) => {
    setLocalValues((prev) => ({
      ...prev,
      [`${ankama_id}-${field}`]: value
    }));
  };
  const handleBlur = (ankama_id, field) => {
    const value = localValues[`${ankama_id}-${field}`];
    if (value !== void 0) {
      const numericValue = value.replace(/^0+/, "");
      updateCraftedItem(ankama_id, field, numericValue === "" ? 0 : Number(numericValue));
    }
  };
  const handleExportAllToSalesTracker = async () => {
    try {
      for (const item of craftedItemList) {
        await db.addSale({
          itemName: item.name,
          quantity: item.amount,
          costPrice: item.costPerUnit,
          sellPrice: item.sellPrice,
          addedDate: /* @__PURE__ */ new Date(),
          sellDate: null,
          profit: (item.sellPrice - item.costPerUnit) * item.amount
        });
      }
      console.log(`Exported all items to Sales Tracker`);
    } catch (error) {
      console.error("Failed to export to Sales Tracker:", error);
    }
  };
  const handleCopyToClipboard = () => {
    const currentDate = /* @__PURE__ */ new Date();
    const formattedDate = `${currentDate.getDate()}/${currentDate.getMonth() + 1}/${currentDate.getFullYear()}`;
    const data = sortedCraftedItemList.map((item) => [item.name, item.amount, item.costPerUnit, item.sellPrice, item.profit, formattedDate]);
    const csvContent = data.map((row) => row.join("	")).join("\n");
    navigator.clipboard.writeText(csvContent).catch((err) => console.error("Failed to copy data: ", err));
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col h-full bg-background text-foreground", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex-shrink-0 p-2 flex justify-between items-center", children: [
      /* @__PURE__ */ jsxDEV("h2", { className: "text-xl font-bold", children: "Crafted Items" }, void 0, false, {
        fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
        lineNumber: 63,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "space-x-2", children: [
        /* @__PURE__ */ jsxDEV(Button, { onClick: handleExportAllToSalesTracker, variant: "outline", size: "sm", className: "bg-secondary text-secondary-foreground", children: "Export All" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 65,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV(Button, { onClick: handleCopyToClipboard, variant: "outline", size: "sm", className: "bg-secondary text-secondary-foreground", children: "Copy to Clipboard" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 68,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
        lineNumber: 64,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
      lineNumber: 62,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "flex-grow overflow-auto rounded-md border border-border", children: /* @__PURE__ */ jsxDEV(Table, { className: "table-custom", children: [
      /* @__PURE__ */ jsxDEV(TableHeader, { children: /* @__PURE__ */ jsxDEV(TableRow, { children: [
        /* @__PURE__ */ jsxDEV(TableHead, { className: "text-muted-foreground", children: "Name" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 77,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV(TableHead, { className: "text-muted-foreground", children: "Amount" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 78,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV(TableHead, { className: "text-muted-foreground", children: "Cost per Unit" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 79,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV(TableHead, { className: "text-muted-foreground", children: "Sell Price" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 80,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV(TableHead, { className: "text-muted-foreground", children: "Profit" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 81,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV(TableHead, { className: "text-muted-foreground", children: "Actions" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 82,
          columnNumber: 15
        }, this)
      ] }, void 0, true, {
        fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
        lineNumber: 76,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
        lineNumber: 75,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV(TableBody, { children: sortedCraftedItemList.map((item) => /* @__PURE__ */ jsxDEV(TableRow, { className: `hover:bg-muted/50 ${item.profit > 0 ? "bg-green-900/20" : item.profit < 0 ? "bg-red-900/20" : ""}`, children: [
        /* @__PURE__ */ jsxDEV(TableCell, { children: item.name }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 87,
          columnNumber: 17
        }, this),
        /* @__PURE__ */ jsxDEV(TableCell, { children: /* @__PURE__ */ jsxDEV(Input, { type: "text", inputMode: "numeric", value: localValues[`${item.ankama_id}-amount`] ?? item.amount, onChange: (e) => handleChange(item.ankama_id, "amount", e.target.value), onBlur: () => handleBlur(item.ankama_id, "amount"), className: "table-input w-20" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 89,
          columnNumber: 19
        }, this) }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 88,
          columnNumber: 17
        }, this),
        /* @__PURE__ */ jsxDEV(TableCell, { children: item.costPerUnit.toLocaleString() }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 91,
          columnNumber: 17
        }, this),
        /* @__PURE__ */ jsxDEV(TableCell, { children: /* @__PURE__ */ jsxDEV(Input, { type: "text", inputMode: "numeric", value: localValues[`${item.ankama_id}-sellPrice`] ?? item.sellPrice, onChange: (e) => handleChange(item.ankama_id, "sellPrice", e.target.value), onBlur: () => handleBlur(item.ankama_id, "sellPrice"), className: "table-input w-24" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 93,
          columnNumber: 19
        }, this) }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 92,
          columnNumber: 17
        }, this),
        /* @__PURE__ */ jsxDEV(TableCell, { children: item.profit.toLocaleString() }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 95,
          columnNumber: 17
        }, this),
        /* @__PURE__ */ jsxDEV(TableCell, { children: /* @__PURE__ */ jsxDEV(Button, { onClick: () => removeCraftedItem(item.ankama_id), className: "btn-remove", children: "Remove" }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 97,
          columnNumber: 19
        }, this) }, void 0, false, {
          fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
          lineNumber: 96,
          columnNumber: 17
        }, this)
      ] }, item.ankama_id, true, {
        fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
        lineNumber: 86,
        columnNumber: 48
      }, this)) }, void 0, false, {
        fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
        lineNumber: 85,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
      lineNumber: 74,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
      lineNumber: 73,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx",
    lineNumber: 61,
    columnNumber: 10
  }, this);
};
_s(CraftedItemList, "32WwAlS0ot244dBfLvmSCED8VJg=");
_c = CraftedItemList;
export default CraftedItemList;
var _c;
$RefreshReg$(_c, "CraftedItemList");
if (import.meta.hot) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
  import(
    /* @vite-ignore */
    __vite__injectQuery(import.meta.url, 'import')).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("E:/Data/Projects/Dofus-Salescraft/src/components/Craftimizer/CraftedItemList.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports)
        return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(currentExports, nextExports);
      if (invalidateMessage)
        import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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O0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFxQ0EsQ0FDRCxLQXhDSDtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBeUNBO0FBQUEsU0FwREY7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQXFEQSxLQXRERjtBQUFBO0FBQUE7QUFBQTtBQUFBLFdBdURBO0FBQUEsT0E3RUY7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQThFQTtBQUVKO0FBQUVWLEdBL0lJSixpQkFBK0M7QUFBQTBELEtBQS9DMUQ7QUFpSk4sZUFBZUE7QUFBZ0IsSUFBQTBEO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsIlRhYmxlIiwiVGFibGVCb2R5IiwiVGFibGVDZWxsIiwiVGFibGVIZWFkIiwiVGFibGVIZWFkZXIiLCJUYWJsZVJvdyIsIklucHV0IiwiQnV0dG9uIiwiZGIiLCJDcmFmdGVkSXRlbUxpc3QiLCJjcmFmdGVkSXRlbUxpc3QiLCJ1cGRhdGVDcmFmdGVkSXRlbSIsInJlbW92ZUNyYWZ0ZWRJdGVtIiwiX3MiLCJsb2NhbFZhbHVlcyIsInNldExvY2FsVmFsdWVzIiwic29ydGVkQ3JhZnRlZEl0ZW1MaXN0Iiwic29ydCIsImEiLCJiIiwibmFtZSIsImxvY2FsZUNvbXBhcmUiLCJoYW5kbGVDaGFuZ2UiLCJhbmthbWFfaWQiLCJmaWVsZCIsInZhbHVlIiwicHJldiIsImhhbmRsZUJsdXIiLCJ1bmRlZmluZWQiLCJudW1lcmljVmFsdWUiLCJyZXBsYWNlIiwiTnVtYmVyIiwiaGFuZGxlRXhwb3J0QWxsVG9TYWxlc1RyYWNrZXIiLCJpdGVtIiwiYWRkU2FsZSIsIml0ZW1OYW1lIiwicXVhbnRpdHkiLCJhbW91bnQiLCJjb3N0UHJpY2UiLCJjb3N0UGVyVW5pdCIsInNlbGxQcmljZSIsImFkZGVkRGF0ZSIsIkRhdGUiLCJzZWxsRGF0ZSIsInByb2ZpdCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImhhbmRsZUNvcHlUb0NsaXBib2FyZCIsImN1cnJlbnREYXRlIiwiZm9ybWF0dGVkRGF0ZSIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZGF0YSIsIm1hcCIsImNzdkNvbnRlbnQiLCJyb3ciLCJqb2luIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwiY2F0Y2giLCJlcnIiLCJlIiwidGFyZ2V0IiwidG9Mb2NhbGVTdHJpbmciLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJzb3VyY2VzIjpbIkNyYWZ0ZWRJdGVtTGlzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBUYWJsZSwgVGFibGVCb2R5LCBUYWJsZUNlbGwsIFRhYmxlSGVhZCwgVGFibGVIZWFkZXIsIFRhYmxlUm93IH0gZnJvbSBcIi4uLy4uLy4uL0AvY29tcG9uZW50cy91aS90YWJsZVwiXHJcbmltcG9ydCB7IElucHV0IH0gZnJvbSBcIi4uLy4uLy4uL0AvY29tcG9uZW50cy91aS9pbnB1dFwiXHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9AL2NvbXBvbmVudHMvdWkvYnV0dG9uXCJcclxuaW1wb3J0IHsgSUNyYWZ0ZWRJdGVtIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL0RhdGFiYXNlU2VydmljZSc7XHJcblxyXG5pbnRlcmZhY2UgQ3JhZnRlZEl0ZW1MaXN0UHJvcHMge1xyXG4gIGNyYWZ0ZWRJdGVtTGlzdDogSUNyYWZ0ZWRJdGVtW107XHJcbiAgdXBkYXRlQ3JhZnRlZEl0ZW06IChhbmthbWFfaWQ6IG51bWJlciwgZmllbGQ6ICdhbW91bnQnIHwgJ3NlbGxQcmljZScsIHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgcmVtb3ZlQ3JhZnRlZEl0ZW06IChhbmthbWFfaWQ6IG51bWJlcikgPT4gdm9pZDtcclxufVxyXG5cclxuY29uc3QgQ3JhZnRlZEl0ZW1MaXN0OiBSZWFjdC5GQzxDcmFmdGVkSXRlbUxpc3RQcm9wcz4gPSAoeyBcclxuICBjcmFmdGVkSXRlbUxpc3QsIFxyXG4gIHVwZGF0ZUNyYWZ0ZWRJdGVtLCBcclxuICByZW1vdmVDcmFmdGVkSXRlbSBcclxufSkgPT4ge1xyXG4gIGNvbnN0IFtsb2NhbFZhbHVlcywgc2V0TG9jYWxWYWx1ZXNdID0gdXNlU3RhdGU8eyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfT4oe30pO1xyXG5cclxuICBjb25zdCBzb3J0ZWRDcmFmdGVkSXRlbUxpc3QgPSBbLi4uY3JhZnRlZEl0ZW1MaXN0XS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGFua2FtYV9pZDogbnVtYmVyLCBmaWVsZDogJ2Ftb3VudCcgfCAnc2VsbFByaWNlJywgdmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0TG9jYWxWYWx1ZXMocHJldiA9PiAoe1xyXG4gICAgICAuLi5wcmV2LFxyXG4gICAgICBbYCR7YW5rYW1hX2lkfS0ke2ZpZWxkfWBdOiB2YWx1ZVxyXG4gICAgfSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZUJsdXIgPSAoYW5rYW1hX2lkOiBudW1iZXIsIGZpZWxkOiAnYW1vdW50JyB8ICdzZWxsUHJpY2UnKSA9PiB7XHJcbiAgICBjb25zdCB2YWx1ZSA9IGxvY2FsVmFsdWVzW2Ake2Fua2FtYV9pZH0tJHtmaWVsZH1gXTtcclxuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IG51bWVyaWNWYWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14wKy8sICcnKTtcclxuICAgICAgdXBkYXRlQ3JhZnRlZEl0ZW0oYW5rYW1hX2lkLCBmaWVsZCwgbnVtZXJpY1ZhbHVlID09PSAnJyA/IDAgOiBOdW1iZXIobnVtZXJpY1ZhbHVlKSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRXhwb3J0QWxsVG9TYWxlc1RyYWNrZXIgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY3JhZnRlZEl0ZW1MaXN0KSB7XHJcbiAgICAgICAgYXdhaXQgZGIuYWRkU2FsZSh7XHJcbiAgICAgICAgICBpdGVtTmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgcXVhbnRpdHk6IGl0ZW0uYW1vdW50LFxyXG4gICAgICAgICAgY29zdFByaWNlOiBpdGVtLmNvc3RQZXJVbml0LFxyXG4gICAgICAgICAgc2VsbFByaWNlOiBpdGVtLnNlbGxQcmljZSxcclxuICAgICAgICAgIGFkZGVkRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHNlbGxEYXRlOiBudWxsLFxyXG4gICAgICAgICAgcHJvZml0OiAoaXRlbS5zZWxsUHJpY2UgLSBpdGVtLmNvc3RQZXJVbml0KSAqIGl0ZW0uYW1vdW50XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coYEV4cG9ydGVkIGFsbCBpdGVtcyB0byBTYWxlcyBUcmFja2VyYCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IHRvIFNhbGVzIFRyYWNrZXI6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZUNvcHlUb0NsaXBib2FyZCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBgJHtjdXJyZW50RGF0ZS5nZXREYXRlKCl9LyR7Y3VycmVudERhdGUuZ2V0TW9udGgoKSArIDF9LyR7Y3VycmVudERhdGUuZ2V0RnVsbFllYXIoKX1gO1xyXG4gICAgXHJcbiAgICBjb25zdCBkYXRhID0gc29ydGVkQ3JhZnRlZEl0ZW1MaXN0Lm1hcChpdGVtID0+IFtcclxuICAgICAgaXRlbS5uYW1lLFxyXG4gICAgICBpdGVtLmFtb3VudCxcclxuICAgICAgaXRlbS5jb3N0UGVyVW5pdCxcclxuICAgICAgaXRlbS5zZWxsUHJpY2UsXHJcbiAgICAgIGl0ZW0ucHJvZml0LFxyXG4gICAgICBmb3JtYXR0ZWREYXRlXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCBjc3ZDb250ZW50ID0gZGF0YS5tYXAocm93ID0+IHJvdy5qb2luKCdcXHQnKSkuam9pbignXFxuJyk7XHJcblxyXG4gICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoY3N2Q29udGVudClcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY29weSBkYXRhOiAnLCBlcnIpKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBiZy1iYWNrZ3JvdW5kIHRleHQtZm9yZWdyb3VuZFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgcC0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZFwiPkNyYWZ0ZWQgSXRlbXM8L2gyPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteC0yXCI+XHJcbiAgICAgICAgICA8QnV0dG9uIFxyXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVFeHBvcnRBbGxUb1NhbGVzVHJhY2tlcn1cclxuICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICBzaXplPVwic21cIlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1zZWNvbmRhcnkgdGV4dC1zZWNvbmRhcnktZm9yZWdyb3VuZFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIEV4cG9ydCBBbGxcclxuICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgPEJ1dHRvbiBcclxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ29weVRvQ2xpcGJvYXJkfVxyXG4gICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgIHNpemU9XCJzbVwiXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXNlY29uZGFyeSB0ZXh0LXNlY29uZGFyeS1mb3JlZ3JvdW5kXCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgQ29weSB0byBDbGlwYm9hcmRcclxuICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3cgb3ZlcmZsb3ctYXV0byByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyXCI+XHJcbiAgICAgICAgPFRhYmxlIGNsYXNzTmFtZT1cInRhYmxlLWN1c3RvbVwiPlxyXG4gICAgICAgICAgPFRhYmxlSGVhZGVyPlxyXG4gICAgICAgICAgICA8VGFibGVSb3c+XHJcbiAgICAgICAgICAgICAgPFRhYmxlSGVhZCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5OYW1lPC9UYWJsZUhlYWQ+XHJcbiAgICAgICAgICAgICAgPFRhYmxlSGVhZCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5BbW91bnQ8L1RhYmxlSGVhZD5cclxuICAgICAgICAgICAgICA8VGFibGVIZWFkIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPkNvc3QgcGVyIFVuaXQ8L1RhYmxlSGVhZD5cclxuICAgICAgICAgICAgICA8VGFibGVIZWFkIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlNlbGwgUHJpY2U8L1RhYmxlSGVhZD5cclxuICAgICAgICAgICAgICA8VGFibGVIZWFkIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlByb2ZpdDwvVGFibGVIZWFkPlxyXG4gICAgICAgICAgICAgIDxUYWJsZUhlYWQgY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+QWN0aW9uczwvVGFibGVIZWFkPlxyXG4gICAgICAgICAgICA8L1RhYmxlUm93PlxyXG4gICAgICAgICAgPC9UYWJsZUhlYWRlcj5cclxuICAgICAgICAgIDxUYWJsZUJvZHk+XHJcbiAgICAgICAgICAgIHtzb3J0ZWRDcmFmdGVkSXRlbUxpc3QubWFwKChpdGVtKSA9PiAoXHJcbiAgICAgICAgICAgICAgPFRhYmxlUm93IFxyXG4gICAgICAgICAgICAgICAga2V5PXtpdGVtLmFua2FtYV9pZH0gXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bob3ZlcjpiZy1tdXRlZC81MCAke1xyXG4gICAgICAgICAgICAgICAgICBpdGVtLnByb2ZpdCA+IDAgPyAnYmctZ3JlZW4tOTAwLzIwJyA6IGl0ZW0ucHJvZml0IDwgMCA/ICdiZy1yZWQtOTAwLzIwJyA6ICcnXHJcbiAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8VGFibGVDZWxsPntpdGVtLm5hbWV9PC9UYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICA8VGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRNb2RlPVwibnVtZXJpY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2xvY2FsVmFsdWVzW2Ake2l0ZW0uYW5rYW1hX2lkfS1hbW91bnRgXSA/PyBpdGVtLmFtb3VudH1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUNoYW5nZShpdGVtLmFua2FtYV9pZCwgJ2Ftb3VudCcsIGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9eygpID0+IGhhbmRsZUJsdXIoaXRlbS5hbmthbWFfaWQsICdhbW91bnQnKX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZS1pbnB1dCB3LTIwXCJcclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgICAgPFRhYmxlQ2VsbD57aXRlbS5jb3N0UGVyVW5pdC50b0xvY2FsZVN0cmluZygpfTwvVGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgICAgPFRhYmxlQ2VsbD5cclxuICAgICAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0TW9kZT1cIm51bWVyaWNcIlxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtsb2NhbFZhbHVlc1tgJHtpdGVtLmFua2FtYV9pZH0tc2VsbFByaWNlYF0gPz8gaXRlbS5zZWxsUHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoaXRlbS5hbmthbWFfaWQsICdzZWxsUHJpY2UnLCBlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25CbHVyPXsoKSA9PiBoYW5kbGVCbHVyKGl0ZW0uYW5rYW1hX2lkLCAnc2VsbFByaWNlJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUtaW5wdXQgdy0yNFwiXHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cclxuICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+e2l0ZW0ucHJvZml0LnRvTG9jYWxlU3RyaW5nKCl9PC9UYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICA8VGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJlbW92ZUNyYWZ0ZWRJdGVtKGl0ZW0uYW5rYW1hX2lkKX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4tcmVtb3ZlXCJcclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIFJlbW92ZVxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgIDwvVGFibGVSb3c+XHJcbiAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgPC9UYWJsZUJvZHk+XHJcbiAgICAgICAgPC9UYWJsZT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ3JhZnRlZEl0ZW1MaXN0OyJdLCJmaWxlIjoiRTovRGF0YS9Qcm9qZWN0cy9Eb2Z1cy1TYWxlc2NyYWZ0L3NyYy9jb21wb25lbnRzL0NyYWZ0aW1pemVyL0NyYWZ0ZWRJdGVtTGlzdC50c3gifQ==